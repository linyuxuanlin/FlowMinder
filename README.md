# FlowMinder

FlowMinder是一个将git graph理念应用于项目管理的Python Web应用。用户可以创建和管理项目，在流程图中添加任务节点，并将数据与本地文件系统双向同步。

## 项目概述

- **主页**: 以卡片形式展示项目，提供创建、编辑和删除功能
- **项目视图**: 展示任务流程图，管理分支和节点
- **数据同步**: 与本地文件系统进行双向数据同步

## 技术栈

- **后端**: Python FastAPI
- **前端**: React + Material UI
- **数据存储**: SQLite (本地数据库)
- **容器化**: Docker

## 开发路线

### 1. 项目基础架构设置

- [x] 创建项目结构
- [x] 设置后端FastAPI框架
- [x] 设置前端React应用
- [x] 配置Docker环境

### 2. 核心功能开发

- [x] 数据模型设计
  - [x] 项目模型
  - [x] 分支模型
  - [x] 节点模型
- [x] 后端API开发
  - [x] 项目CRUD操作
  - [x] 分支管理
  - [x] 节点管理
  - [x] 本地文件同步
- [x] 前端UI开发
  - [x] 主页项目列表
  - [x] 项目详情页基本结构
  - [x] 流程图画布
  - [x] 节点属性编辑面板

### 3. 界面功能实现

- [x] 主页
  - [x] 项目卡片展示
  - [x] 创建项目弹窗
  - [x] 项目编辑和删除
- [x] 项目详情页
  - [x] 顶栏设计
  - [x] 侧栏项目列表
  - [x] 流程图主视图
  - [x] 节点属性面板

### 4. 流程图功能

- [x] 分支管理
  - [x] 分支创建和展示
  - [ ] 分支编辑和删除
  - [ ] 分支拖拽排序
- [x] 节点管理
  - [x] 主节点和二级节点创建
  - [x] 节点状态管理
  - [x] 节点连接线和箭头
  - [x] 节点编辑和删除

### 5. 本地同步功能

- [x] 文件系统操作
  - [x] 路径选择和验证
  - [x] 读取本地文件
  - [x] 写入本地文件
- [x] 双向同步逻辑
  - [x] 检测变更
  - [x] 合并数据
  - [x] 解决冲突

### 6. 部署和优化

- [x] Docker配置完善
- [ ] 性能优化
- [ ] 用户体验改进
- [ ] 错误处理和日志

## 目录结构

```
FlowMinder/
├── backend/                # 后端FastAPI应用
│   ├── app/
│   │   ├── api/            # API路由
│   │   ├── core/           # 核心配置
│   │   ├── db/             # 数据库模型和操作
│   │   ├── models/         # 数据模型
│   │   ├── services/       # 业务逻辑
│   │   └── utils/          # 工具函数
│   ├── main.py             # 后端入口
│   └── requirements.txt    # 后端依赖
├── frontend/               # 前端React应用
│   ├── public/             # 静态资源
│   ├── src/
│   │   ├── components/     # 组件
│   │   │   ├── Flowchart/  # 流程图组件
│   │   │   └── ...         # 其他组件
│   │   ├── pages/          # 页面
│   │   ├── services/       # API服务
│   │   ├── styles/         # 样式
│   │   └── utils/          # 工具函数
│   ├── package.json        # 前端依赖
│   └── README.md           # 前端说明
├── compose.yml             # Docker Compose配置
└── README.md               # 项目说明
```

## 使用方法

1. 克隆仓库
2. 启动项目：
   ```
   docker compose up --build
   ```
3. 访问应用：
   - 前端：http://localhost:3000
   - 后端API：http://localhost:8000/docs

## 开发进度

- [x] 创建主页和项目管理功能
- [x] 创建项目详情页基本结构
- [x] 实现流程图基本功能
  - [x] 流程图节点创建和管理
  - [x] 节点状态管理（进行中、已完成、已弃用）
  - [x] 节点之间的连接线
- [ ] 完善节点拖拽功能
- [ ] 图表布局优化
- [ ] 完善项目间导航

## 流程图功能说明

流程图组件使用原生Web技术（React、SVG、CSS）实现，不依赖第三方流程图库。主要功能：

1. **节点管理**：
   - 主节点：代表项目中的主要里程碑或任务
   - 二级节点：连接到主节点的子任务或细节
   - 节点状态：进行中（黄色）、已完成（绿色）、已弃用（灰色）

2. **节点操作**：
   - 创建：可创建主节点或二级节点
   - 编辑：修改节点名称、描述和状态
   - 删除：移除不需要的节点

3. **视图控制**：
   - 缩放：放大/缩小流程图
   - 自动布局：节点自动排列，保持清晰结构

## 注意事项

- 节点之间有上下级关系，删除主节点前需先删除其下所有二级节点
- 当前版本流程图尚未支持自由拖拽定位
- 流程图状态会自动保存到数据库 